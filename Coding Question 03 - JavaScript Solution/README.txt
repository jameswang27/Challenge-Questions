I have no real prior experience with JavaScript, so this script took a very long time.

The general principle is to have a hashmap of paths and a sort of recursive traversal that can add to this hash when appropriate.

I made extensive use of this tutorial:
http://www.w3schools.com/js/js_function_definition.asp
as well as some google searching of parsing jsons in Javascript

The parse() function proved vital.